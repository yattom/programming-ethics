# テスト方針

## 方針概要

| テスト種別 | ツール | 対象 |
|-----------|--------|------|
| E2E テスト | playwright | ユースケース (UC) 単位の操作フロー |
| ユニットテスト | vitest | マップモデルのロジック、複雑なビューロジック |

## E2E テスト (playwright)

### 方針

- 各ユースケース (UC001〜UC004) を網羅するシナリオを1つ以上書く
- 細かな仕様 (バリデーションの詳細など) は E2E テストの対象外
- ユーザーの操作と画面の反応を検証する

### テスト一覧 (予定)

| テスト ID | 対応UC | 内容 |
|-----------|--------|------|
| E01 | UC001 | トップページを開くと倫理マップが表示される |
| E02 | UC002 | ノードにマウスオーバーすると説明が表示される |
| E03 | UC003 | ポイントを配布してマップが更新される |
| E04 | UC004 | マップ状態を URL で共有・復元できる |

## ユニットテスト (vitest)

### マップモデル (EthicsMap.js)

- ノード構造の定義が正しいこと
- 親子関係 (進化ライン) が正しいこと
- ポイント割り振りルールの検証:
  - 上限 (親ノードのポイント以下) のチェック
  - Pノード総量のチェック
  - ポイントを減らすときのルール (子ノードへの影響)
- 各種メソッドの正常系・異常系

### ビューロジック

- 複雑なロジック (例: 色のグラデーション計算、URL エンコード/デコード) を別関数に切り出した場合のみユニットテストを書く
- シンプルな Vue コンポーネントのロジックはユニットテストの対象外

## テストしないもの

- CSS スタイルの詳細
- AI 連携機能 (オプション機能、外部依存)
- 単純な表示のみのコンポーネント
